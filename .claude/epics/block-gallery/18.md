---
name: Autenticacion y proteccion de rutas
status: open
created: 2025-12-24T18:34:15Z
updated: 2025-12-24T18:46:00Z
github: https://github.com/javikin/choiz-website-cms-mx/issues/18
depends_on: []
parallel: true
conflicts_with: []
---

# Task: Autenticacion y proteccion de rutas

## Description
Implementar autenticacion para la galeria de bloques usando el sistema existente de TinaCMS. Todas las rutas de /block-gallery deben requerir autenticacion, redirigiendo a /admin/login si el usuario no esta autenticado.

## Acceptance Criteria
- [ ] Middleware de Next.js verifica sesion de TinaCMS
- [ ] Usuarios no autenticados son redirigidos a /admin/login
- [ ] Usuarios autenticados pueden acceder a /block-gallery
- [ ] Session persiste durante la navegacion en la galeria
- [ ] Logout funciona correctamente

## Technical Details
- Crear `src/app/block-gallery/layout.tsx` con auth provider
- Usar TinaCMS authentication hooks existentes
- Implementar redirect en server component si no hay sesion
- Archivos afectados:
  - `src/app/block-gallery/layout.tsx` (nuevo)
  - `src/app/block-gallery/page.tsx` (modificar para auth check)

## Dependencies
- [ ] TinaCMS configurado con autenticacion (ya existe)
- [ ] TinaCloud credentials configuradas

## Effort Estimate
- Size: S
- Hours: 4-6
- Parallel: true (no depende de otras tareas)

## Definition of Done
- [ ] Code implemented
- [ ] Auth flow probado manualmente
- [ ] Redirect a login funciona
- [ ] Sesion persiste correctamente
