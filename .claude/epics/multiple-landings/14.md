---
name: Agregar colección page a TinaCMS
status: open
created: 2025-12-23T04:57:47Z
updated: 2025-12-23T05:06:22Z
github: https://github.com/javikin/choiz-website-cms-mx/issues/14
depends_on: [13]
parallel: false
conflicts_with: [13]
---

# Task: Agregar colección page a TinaCMS

## Description

Crear una nueva colección `page` en TinaCMS que permita a Marketing crear múltiples landing pages. Esta colección reutiliza los templates de secciones extraídos en Task 001.

## Acceptance Criteria

- [ ] Nueva colección `page` agregada a `tina/config.ts`
- [ ] Directorio `content/pages/` creado
- [ ] Campos: title, status (draft/published), seo, navbar, sections
- [ ] Slug se genera automáticamente del título
- [ ] Router configurado para preview en `/{slug}`
- [ ] TinaCMS muestra "Landing Pages" en el sidebar

## Technical Details

### Archivo a modificar
- `tina/config.ts`

### Nueva colección

```typescript
// Agregar después de la colección 'landing'
{
  name: "page",
  label: "Landing Pages",
  path: "content/pages",
  format: "json",
  ui: {
    filename: {
      slugify: (values) => {
        return values?.title
          ?.toLowerCase()
          .normalize("NFD")
          .replace(/[\u0300-\u036f]/g, "") // Remove accents
          .replace(/[^a-z0-9]+/g, "-")
          .replace(/(^-|-$)/g, "");
      },
    },
    router: ({ document }) => `/${document._sys.filename}`,
  },
  fields: [
    {
      type: "string",
      name: "title",
      label: "Título de la Página",
      required: true,
      description: "El título se usará para generar la URL automáticamente",
    },
    {
      type: "string",
      name: "status",
      label: "Estado",
      description: "Las páginas en borrador no son visibles públicamente",
      options: [
        { value: "draft", label: "Borrador" },
        { value: "published", label: "Publicada" },
      ],
      ui: {
        defaultItem: "draft",
      },
    },
    // SEO fields (reutilizar)
    ...seoFields,
    // Navbar (copiar de landing)
    {
      type: "object",
      name: "navbar",
      label: "Navegación",
      // ... campos de navbar
    },
    // Secciones reordenables
    {
      type: "object",
      name: "sections",
      label: "Secciones de la Página",
      description: "Arrastra para reordenar las secciones",
      list: true,
      templates: sectionTemplates,
    },
  ],
}
```

### Crear directorio de contenido
```bash
mkdir -p content/pages
```

### Verificación
```bash
npx tinacms build
npm run dev
# Ir a http://localhost:3000/admin
# Verificar que aparece "Landing Pages" en sidebar
# Crear una página de prueba
```

## Dependencies

- [ ] Task 001: Templates extraídos a `sectionTemplates`

## Effort Estimate

- Size: S
- Hours: 1
- Parallel: false (depende de Task 001)

## Definition of Done

- [ ] Colección `page` agregada a config
- [ ] `content/pages/` directorio existe
- [ ] TinaCMS muestra "Landing Pages" en sidebar
- [ ] Se puede crear una nueva página desde TinaCMS
- [ ] El slug se genera automáticamente
